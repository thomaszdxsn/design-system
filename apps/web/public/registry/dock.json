{
  "name": "dock",
  "type": "registry:ui",
  "title": "Dock",
  "description": "Dock component",
  "dependencies": [
    "class-variance-authority",
    "motion",
    "react",
    "clsx",
    "tailwind-merge"
  ],
  "registryDependencies": [
    "utils"
  ],
  "files": [
    {
      "path": "magicui/dock.tsx",
      "type": "registry:ui",
      "content": "import { type VariantProps, cva } from \"class-variance-authority\";\nimport { type MotionValue, motion, useMotionValue, useSpring, useTransform } from \"motion/react\";\nimport type { MotionProps } from \"motion/react\";\nimport React, { type PropsWithChildren, useRef } from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nexport interface DockProps extends VariantProps<typeof dockVariants> {\n  className?: string;\n  iconSize?: number;\n  iconMagnification?: number;\n  disableMagnification?: boolean;\n  iconDistance?: number;\n  direction?: \"top\" | \"middle\" | \"bottom\";\n  children: React.ReactNode;\n}\n\nconst DEFAULT_SIZE = 40;\nconst DEFAULT_MAGNIFICATION = 60;\nconst DEFAULT_DISTANCE = 140;\nconst DEFAULT_DISABLEMAGNIFICATION = false;\n\nconst dockVariants = cva(\n  \"supports-backdrop-blur:bg-white/10 supports-backdrop-blur:dark:bg-black/10 mx-auto mt-8 flex h-[58px] w-max items-center justify-center gap-2 rounded-2xl border p-2 backdrop-blur-md\",\n);\n\nconst Dock = React.forwardRef<HTMLDivElement, DockProps>(\n  (\n    {\n      className,\n      children,\n      iconSize = DEFAULT_SIZE,\n      iconMagnification = DEFAULT_MAGNIFICATION,\n      disableMagnification = DEFAULT_DISABLEMAGNIFICATION,\n      iconDistance = DEFAULT_DISTANCE,\n      direction = \"middle\",\n      ...props\n    },\n    ref,\n  ) => {\n    const mouseX = useMotionValue(Number.POSITIVE_INFINITY);\n\n    const renderChildren = () => {\n      return React.Children.map(children, (child) => {\n        if (React.isValidElement<DockIconProps>(child) && child.type === DockIcon) {\n          return React.cloneElement(child, {\n            ...child.props,\n            mouseX: mouseX,\n            size: iconSize,\n            magnification: iconMagnification,\n            disableMagnification: disableMagnification,\n            distance: iconDistance,\n          });\n        }\n        return child;\n      });\n    };\n\n    return (\n      <motion.div\n        ref={ref}\n        onMouseMove={(e) => mouseX.set(e.pageX)}\n        onMouseLeave={() => mouseX.set(Number.POSITIVE_INFINITY)}\n        {...props}\n        className={cn(dockVariants({ className }), {\n          \"items-start\": direction === \"top\",\n          \"items-center\": direction === \"middle\",\n          \"items-end\": direction === \"bottom\",\n        })}\n      >\n        {renderChildren()}\n      </motion.div>\n    );\n  },\n);\n\nDock.displayName = \"Dock\";\n\nexport interface DockIconProps\n  extends Omit<MotionProps & React.HTMLAttributes<HTMLDivElement>, \"children\"> {\n  size?: number;\n  magnification?: number;\n  disableMagnification?: boolean;\n  distance?: number;\n  mouseX?: MotionValue<number>;\n  className?: string;\n  children?: React.ReactNode;\n  props?: PropsWithChildren;\n}\n\nconst DockIcon = ({\n  size = DEFAULT_SIZE,\n  magnification = DEFAULT_MAGNIFICATION,\n  disableMagnification,\n  distance = DEFAULT_DISTANCE,\n  mouseX,\n  className,\n  children,\n  ...props\n}: DockIconProps) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const padding = Math.max(6, size * 0.2);\n  const defaultMouseX = useMotionValue(Number.POSITIVE_INFINITY);\n\n  const distanceCalc = useTransform(mouseX ?? defaultMouseX, (val: number) => {\n    const bounds = ref.current?.getBoundingClientRect() ?? { x: 0, width: 0 };\n    return val - bounds.x - bounds.width / 2;\n  });\n\n  const targetSize = disableMagnification ? size : magnification;\n\n  const sizeTransform = useTransform(\n    distanceCalc,\n    [-distance, 0, distance],\n    [size, targetSize, size],\n  );\n\n  const scaleSize = useSpring(sizeTransform, {\n    mass: 0.1,\n    stiffness: 150,\n    damping: 12,\n  });\n\n  return (\n    <motion.div\n      ref={ref}\n      style={{ width: scaleSize, height: scaleSize, padding }}\n      className={cn(\n        \"flex aspect-square cursor-pointer items-center justify-center rounded-full\",\n        disableMagnification && \"hover:bg-muted-foreground transition-colors\",\n        className,\n      )}\n      {...props}\n    >\n      <div>{children}</div>\n    </motion.div>\n  );\n};\n\nDockIcon.displayName = \"DockIcon\";\n\nexport { Dock, DockIcon, dockVariants };\n"
    }
  ],
  "meta": {
    "copy": [
      {
        "id": "dock-install",
        "kind": "install",
        "content": "pnpm dlx shadcn@latest add \"https://design-system-e2x.pages.dev/registry/dock.json\"",
        "description": "pnpm 安装（首选）",
        "componentId": "dock"
      },
      {
        "id": "dock-import",
        "kind": "import",
        "content": "import { dock } from \"@/components/ui/dock\";",
        "description": "示例导入路径",
        "componentId": "dock"
      },
      {
        "id": "dock-usage",
        "kind": "usage",
        "content": "<Dock>Example</Dock>\n",
        "description": "基础用法",
        "componentId": "dock"
      }
    ],
    "copyCommand": {
      "npm": "npx shadcn@latest add \"https://design-system-e2x.pages.dev/registry/dock.json\"",
      "pnpm": "pnpm dlx shadcn@latest add \"https://design-system-e2x.pages.dev/registry/dock.json\"",
      "bun": "bunx shadcn@latest add \"https://design-system-e2x.pages.dev/registry/dock.json\""
    },
    "checksum": "b4da397db60d5bd0",
    "updatedAt": "2026-01-21T08:37:22.317Z"
  }
}