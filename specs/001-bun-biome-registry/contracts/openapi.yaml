openapi: 3.1.0
info:
  title: Shadcn Registry API (Static)
  version: 0.1.0
  description: >
    Read-only endpoints for CDN-hosted registry JSON used by Copy Command UI and CLI.
servers:
  - url: https://cdn.example.com/registry
    description: CDN/edge bucket hosting generated registry JSON
paths:
  /index.json:
    get:
      summary: List available registry components
      responses:
        "200":
          description: Registry index
          content:
            application/json:
              schema:
                type: object
                properties:
                  components:
                    type: array
                    items:
                      $ref: "#/components/schemas/RegistrySummary"
              examples:
                sample:
                  value:
                    components:
                      - id: button
                        name: Button
                        category: ui
                        version: "2025-12-06"
        "500":
          description: Static file missing or corrupt
  /{componentId}.json:
    get:
      summary: Fetch registry entry by id
      parameters:
        - in: path
          name: componentId
          required: true
          schema:
            type: string
            pattern: "^[a-z0-9-]+$"
      responses:
        "200":
          description: Registry entry
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RegistryEntry"
        "404":
          description: Component not found
        "500":
          description: Static file missing or corrupt
components:
  schemas:
    RegistrySummary:
      type: object
      required: [id, name, category, version]
      properties:
        id:
          type: string
        name:
          type: string
        category:
          type: string
          enum: [ui, magic, blocks]
        version:
          type: string
    RegistryEntry:
      type: object
      required:
        - id
        - name
        - files
        - registryDependencies
        - npmDependencies
        - copyCommand
      properties:
        id:
          type: string
        name:
          type: string
        files:
          type: array
          items:
            type: object
            required: [path, content]
            properties:
              path:
                type: string
              content:
                type: string
        registryDependencies:
          type: array
          items:
            type: string
        npmDependencies:
          type: array
          items:
            type: string
        tailwind:
          type: object
          properties:
            config:
              type: string
            css:
              type: string
        copyCommand:
          type: object
          required: [npm, pnpm, bun]
          properties:
            npm:
              type: string
            pnpm:
              type: string
            bun:
              type: string
        checksum:
          type: string
        updatedAt:
          type: string
          format: date-time
